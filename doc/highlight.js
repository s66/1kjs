$1k.widget('highlight',function(f){var q,v,w,B,r,x,s={js:y,html:C,css:z},t={};function D(){q=f('textarea.lang-js,textarea.lang-html,textarea.lang-css')}function E(a){r={edit:a.edit||'on',skin:a.skin||'default'}}function F(){f.style('.Zwhl_wrap .codesourcebox{border:1px solid #999;margin: 3px;overflow:hidden;padding:3px;font-size:12px;}textarea.lang-js,textarea.lang-css,textarea.lang-html,.Zwhl_wrap .codesourcebox textarea{font:12px/1.6 Monaco,"Lucida Console","Consolas","Courier New",Courier,mono,serif;border:0;min-height:360px;_height:360px;display:block;width:100%;resize:none;outline:none;}.Zwhl_wrap .codesourcebox{display:none;}.Zwhl_wrap .codesourcebox .btnbox{border-top:1px solid #999;padding-top:3px;}.Zwhl_wrap .codesourcebox button{padding:0 6px;}.Zwhl_wrap .codeviewbox ol{font:12px/2 monaco,"Courier New",verdana,Helvetica,Tahoma,Arial,sans-serif;word-wrap:break-word;word-break:break-all;display:inline-block\9;}.Zwhl_wrap ol{margin:0;padding:0;padding:4px 8px}.Zwhl-edit{border:1px solid #999;background:#eee;}.Zwhl-edit .codeviewbox{display:none;}.Zwhl-edit span{color:green;padding-left:1em;}.Zwhl-edit .codesourcebox{display:block;background:#fff;}.Zwhl_menu{position:absolute;background:#FFFFFF;border:1px solid #999;font-size:12px;top:0;left:-999px;padding:1px;width:100px;}.Zwhl_menu a{display:block;padding:3px 12px;color:#333;text-decoration:none!important;}.Zwhl_menu a:hover{background:#316AC5;color:#fff;}.Zwhl_run{z-index:9999;display:none;position:absolute;position:fixed;left:0;top:0;width:100%;height:400px;background:#fff;}.Zwhl_run .closebar{margin:3px auto;width:400px;padding:8px;font-size:12px;font-weight:bold;cursor:pointer;text-align:center;background:#fefefe;border:1px solid #999;color:#FF0000;}.Zwhl_run .closebar:hover{background:#feefff;}.Zwhl_run iframe{border-top:1px solid #000}'+(function g(){var a={'black':['padding:2px 0 2px 4em;background:#060606;color:#eee;','background:#222;padding:0 0 0 5px;border-left:1px solid #333;','119BEE,666666,89D726,89D726,FE81F8,119BEE,89D726,86CC99,B7B700,FE81F8,119BEE,89D726'],'default':['background:#eee;border-radius:8px;border:1px solid #3C78B5;padding-left:4em;margin:12px 0;','line-height:1.8;border-left:1px dotted #3C78B5;padding-left: 6px;','0000C6,666666,FF0000,008074,0000C6,B0812C,666666,FF0000,008074,008074,FF0000,666666'],'bop':['padding:2px 0 2px 52px;background:#060606;color:#eee;','background:#222;padding:0 0 0 5px;border-left:1px solid #333;','efac32,d9d762,6c99bb,efac32,ef5d32,808000,d9d762,6c99bb,8856d2,efac32,c0c0c0,d9d762']};var c=[];var d=['tag','attrval','attrkey','doctype','keyword','comment','quote','number','regexp','csssel','csskey','cssval'];for(var b in a){var e=a[b];c.push('.Zwhl-skin-'+b+' ol{'+e[0]+'}');c.push('.Zwhl-skin-'+b+' li{'+e[1]+'}');var i=e[2].split(',');var h=0;while(d[h]){c.push('.Zwhl-skin-'+b+' .'+d[h]+'{color:#'+i[h++]+'}')}}return c.join('')})()+'')}function G(){v=/(?:\$[\w$]+)|(?:\+\+|--)|(?:([-+*^{[(~:=?,!|]|\/\s+)|([<>&])|(typeof|void|return|in|throw|case))(?:(\s+)|(\s*(?:\/\*(?:[\w\W](?!\*\/))*?\*\/|\/\/.+\n+)\s*))?(\/(?![\*\/])(?:\\\\|\\\/|\\\[|\[.+?\]|[^\/\r\n])+\/[gim]*)|(boolean|break|byte|case|catch|char|class|const|continue|default|double|do|else|extends|false|finally|final|float|for|function|goto|if|implements|import|instanceof|interface|int|in|long|native|new|null|package|private|protected|public|return|short|static|super|switch|synchronized|typeof|this|throw|throws|transient|true|try|var|void|while|with)(?![\w$])|(?:[a-zA-Z_][\w]*)|(0x[0-9a-fA-F]+|(?:\d+\.\d*|\d*\.\d+|\d+)(?:[eE][+\-]?\d+)?)|('(?:\\\\|\\\'|[^']|\\\n)*'|"(?:\\\\|\\\"|[^"]|\\\n)*")|(\/\*[\w\W]*?\*\/|\/\/.*)|([<>&\s]+)/g;w=/<(script|style|textarea)((?:"[^"]+"|'[^']+'|[^>]+)*)>([\s\S]*?)<\/\1>|<\/(\w+)>|(?:<(\w+)((?:(?:"[^"]*"|'[^']*'|[^>])+)*)>)|(<!--[\s\S]*?-->)|(<!doctype[^>]*?>)|(\n+)|(<|[>& ]+)/gi;B=/{$getReg.css}/g}function H(){var d;var b;f('body').append(d=f('<div class="Zwhl_menu"><a href="#" jbtn="edit">\u7F16\u8F91\u4EE3\u7801</a><a href="#" jbtn="run">\u8FD0\u884C\u4EE3\u7801</a><a href="http://www.1kjs.com/lib/widget/highlight/" target="_blank">\u5173\u4E8E\u63D2\u4EF6</a></div>'));d.click(function(a){d.left(-1999);switch(f(a.target).attr('jbtn')){case'edit':a.preventDefault();b.cls('~Zwhl-edit');f.scrollTop(b.offsetTop()-120,1000);break;case'run':a.preventDefault();t[b.type](b.find('textarea').val());break;default:return}a.preventDefault();a.stopPropagation()}).on('contextmenu',function(a){a.preventDefault()});f(document).click(function(a){if(!d.contains(a.target)){d.left(-200)}});x={show:function(a,c){b=c;d.left(a.clientX+4);d.top(a.clientY+f.scrollTop()+4)}}}function I(){var d=f('<div class="Zwhl_run"><div class="closebar">\u70B9\u51FB\u5173\u95ED</div></div>');var b=document.documentElement;var e;var i;var h=0;f('body').append(d);f.isIE6&&d.css('position:absolute');t={js:function(a){e&&e.remove();d.append(e=f('<iframe name="Zwhl_run" frameborder="0" width="100%"></iframe>'));var c=window.open('','Zwhl_run');c.document.write('<script>!function(){'+a+'\n}()</script>');c.document.close()},html:function(a){e&&e.remove();d.append(e=f('<iframe name="Zwhl_run" frameborder="0" width="100%"></iframe>'));f('html').css('overflow','hidden');h=1;g();i=Math.max(b.scrollTop,document.body.scrollTop);f.isIE6&&d.css('top',i);d.show();var c=window.open('','Zwhl_run');c.document.write(a);c.document.close()}};function g(){if(h){d.css({width:b.clientWidth,height:b.clientHeight});e.height(b.clientHeight-40)}}f(window).on('resize',g);d.child(0).click(function(){f('html').css('overflow','');b.scrollTop=document.body.scrollTop=i;d.hide();e.remove();e=null;h=0})}function J(){q.each(function(){var b=this.cls().match(/lang-(js|html|css)/)[1];var e=this.attr('skin')||r.skin;var i=this.attr('edit')||r.eidt;var h=function(c){var d=Array(8).join('    ');c=c.replace(/\t/g,'    ').replace(/\s+$/,'');if(!/^\S/m.test(c)){c.replace(/^\s+/gm,function(a){if(a.length<d.length)d=a});c=c.replace(RegExp('^'+d,'gm'),'')}return c}(this.elem.value);this.elem.value=h;if(i=='off'||b=='css'){this.replace('<div class="Zwhl_wrap Zwhl-skin-'+e+'"><div class="codeviewbox">'+s[b](h)+'</div></div>')}else{var g=f('<div class="Zwhl_wrap Zwhl-skin-'+e+'" title="\u70B9\u51FB\u53F3\u952E\u8FD0\u884C\u4EE3\u7801"><div class="codesourcebox"><textarea>'+h+'</textarea><div class="btnbox"><button>\u52A0\u4EAE\u4EE3\u7801</button><button>\u6267\u884C\u4EE3\u7801</button><span>\u63D0\u793A\uFF1A\u4F60\u53EF\u4EE5\u5148\u4FEE\u6539\u4EE3\u7801\u518D\u6267\u884C\u64CD\u4F5C\uFF01</span></div></div><div class="codeviewbox">'+s[b](h)+'</div></div>');this.replace(g);var l=g.child(1).on('contextmenu',function(a){g.type=b;x.show(a,g);a.preventDefault()}),j=g.find('textarea');g.find('button').each(function(a){this.click(function(){if(a){t[b](j.val())}else{l.html(s[b](j.elem.value));g.cls('~Zwhl-edit')}})})}})}function y(o){return'<ol><li>'+o.replace(/\r/g,'').replace(/\t/g,'    ').replace(v,function(a,c,d,b,e,i,h,g,l,j,m,n){switch(!1){case!h:return(c||'')+k(d)+'<span class="keyword">'+(b||'')+'</span>'+(e||'').replace(/\n/g,'</li><li>').replace(/\s/g,'&nbsp;')+'<span class="comment">'+k(i).replace(/\n/g,'</span></li><li><span class="comment">')+'</span><span class="regexp">'+k(h)+'</span>';case!g:return'<span class="keyword">'+g+'</span>';case!l:return'<span class="number">'+l+'</span>';case!j:return'<span class="quote">'+k(j).replace(/\n/g,'</span></li><li><span class="quote">')+'</span>';case!m:return'<span class="comment">'+k(m).replace(/\n/g,'</span></li><li><span class="comment">')+'</span>';case!n:return k(n).replace(/\n/g,'</li><li>')}return a})+'</li></ol>'}function C(o){return'<ol><li>'+o.replace(/\r/g,'').replace(/\t/g,'    ').replace(w,function(a,c,d,b,e,i,h,g,l,j,m,n){switch(!1){case!c:if(c=='script'){b=y(b).replace(/<ol><li>|<\/li><\/ol>/g,'')}else if(c=='style'){b=z(b).replace(/<ol><li>|<\/li><\/ol>/g,'')}else{b=k(b).replace(/\n/g,'</li><li>')}return'<span class="tag">&lt;'+c+A(d)+'&gt;</span>'+b+'<span class="tag">&lt;/'+c+'&gt;</span>';case!e:return'<span class="tag">&lt;/'+e+'&gt;</span>';case!i:return'<span class="tag">&lt;'+i+A(h)+'&gt;</span>';case!g:return'<span class="comment">'+k(g).replace(/\n/g,'</span></li><li><span class="comment">')+'</span>';case!l:return'<span class="doctype">'+k(l)+'</span>';case!j:return j.replace(/\n/g,'</li><li>');case!m:return k(m)}return a})+'</li></ol>'}function z(u){u=u.replace(/\t/g,'    ').replace(/(\{[^\}]*\})|(\/\*[\w\W]*?\*\/)|(\n)|([^\n\{\}]+)/g,function(g,l,j,m,n,o){switch(!1){case!l:return g.replace(/([^{\n;]+?:[^}\n;]+)|(\n)|(\/\*[\w\W]*?\*\/)|( )/g,function(a,c,d,b,e){switch(!1){case!c:var i=c.split(':')[0],h=c.replace(/[^:]+:/,'');return'<span class="csskey">'+p(i)+'</span>:<span class="cssval">'+h+'</span>';case!d:return'</li><li>';case!b:return'<span class="comment">'+p(b)+'</span>';case!e:return'&nbsp;'}});case!j:return'<span class="comment">'+p(j)+'</span>';case!m:return'</li><li>';case!n:return n.replace(/(\/\*[\w\W]*?\*\/)|( )|(\t)|([^{]+)/g,function(a,c,d,b,e){if(c){return'<span class="comment">'+p(c)+'</span>'}else if(d){return'&nbsp;'}else if(b){return'&nbsp;&nbsp;&nbsp;&nbsp;'}else if(e){return'<span class="csssel">'+e+'</span>'}})}});return'<ol><li>'+u+'</li></ol>';function p(a){return a.replace(/&/g,'&amp;').replace(/</g,'&lt;').replace(/\s/g,'&nbsp;').replace(/</g,'&lt;')}}function k(a){return a?a.replace(/&/g,'&amp;').replace(/</g,'&lt;').replace(/>/g,'&gt;').replace(/ /g,'&nbsp;'):''}function A(b){return b?b.replace(/([-\w]+\s*=\s*)('[^']*'|"[^"]*"|[^\s'"]*)/g,function(a,c,d){return'<span class="attrkey">'+c+'</span><span class="attrval">'+k(d)+'</span>'}):''}return{init:function(a){f(function(){D();if(q){E(a||{});F();G();H();I();J()}})}}});